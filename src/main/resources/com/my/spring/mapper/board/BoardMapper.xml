<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.my.spring.mapper.board.BoardMapper">

	<select id="getBoardList"
		resultType="com.my.spring.dto.BoardDto">
		<!-- xml에서 부등호를 사용할 경우CDATA가 필요 -->
		<![CDATA[
		SELECT
			*
		FROM
			TBL_BOARD
		WHERE
			bno > 0
		order by
			bno
		]]>
	</select>

	<select id="getBoardContents"
		resultType="com.my.spring.dto.BoardDto"
		parameterType="com.my.spring.dto.BoardDto">
		SELECT
		BNO, CATEGORY_CD, TITLE, CONTENT, TAG, VIEW_CNT,
		REG_ID, REG_DATE, MOD_DATE
		FROM
		TBL_BOARD
		WHERE
		BNO = #{bno}
	</select>

	<insert id="insertBoard"
		parameterType="com.my.spring.dto.BoardDto">
		INSERT INTO TBL_BOARD (BNO, CATEGORY_CD, TITLE, CONTENT, TAG,
		VIEW_CNT, REG_ID, REG_DATE, MOD_DATE)
		VALUES (
		BNO_SEQ.nextval
		<!-- ,#{category_cd} -->
		,'test'<!-- 임시 category_cd -->
		, #{title}
		, #{content}
		, #{tag}
		, 0
		<!-- , #{reg_id} -->
		,'test'<!-- 임시 reg_id -->
		, sysdate
		, sysdate
		)
	</insert>

	<update id="updateBoard"
		parameterType="com.my.spring.dto.BoardDto">
		UPDATE TBL_BOARD SET
		CATEGORY_CD = #{category_cd}
		, TITLE = #{title}
		, CONTENT = #{content}
		, TAG = #{tag}
		, MOD_DATE = now()
		WHERE
		BNO = ${bno}
	</update>

	<delete id="deleteBoard" parameterType="int">
		DELETE FROM TBL_BOARD
		WHERE bno = #{bno}
	</delete>

	<update id="updateViewCnt"
		parameterType="com.my.spring.dto.BoardDto">
		UPDATE TBL_BOARD SET
		VIEW_CNT = VIEW_CNT + 1
		WHERE
		bno =
		#{bno}
	</update>

</mapper>
